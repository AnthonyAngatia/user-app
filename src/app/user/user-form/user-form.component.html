<div class="px-2">
  <div class="modal-header">
    <h4 class="modal-title pull-left">Add User</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="userForm">
      <div class="mb-3">
        <label for="name" class="form-label">Name</label>
        <span class="color-red">*</span>
        <input type="text" class="form-control" formControlName="name" id="name" placeholder="Enter name"
               [ngClass]="{'is-invalid': (userForm.get('name')?.touched ||
                  userForm.get('name')?.dirty) &&
                   !userForm.get('name')?.valid }">
        <div class="text-danger small ml-2" *ngIf="userForm.get('name')?.errors?.['required'] && (userForm.get('name')?.touched ||
                  userForm.get('name')?.dirty)">
          Name is required
        </div>
      </div>
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <span class="color-red">*</span>
        <input type="text" class="form-control" formControlName="username" id="username" placeholder="Enter username"
               [ngClass]="{'is-invalid': (userForm.get('username')?.touched ||
                  userForm.get('username')?.dirty) &&
                   !userForm.get('username')?.valid }">
        <div class="text-danger small ml-2"
             *ngIf="userForm.get('username')?.errors?.['required'] && (userForm.get('username')?.touched ||
                  userForm.get('username')?.dirty)">
          Username is required
        </div>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <span class="color-red">*</span>
        <input type="text" class="form-control" formControlName="email" id="email" placeholder="Enter email"
               [ngClass]="{'is-invalid': (userForm.get('email')?.touched ||
                  userForm.get('email')?.dirty) &&
                   !userForm.get('email')?.valid }"
        [ngClass]="{'is-valid': userForm.get('email')?.valid}">
        <div class="text-danger small ml-2"
             *ngIf="!userForm.get('email')?.valid && (userForm.get('email')?.touched ||
                  userForm.get('email')?.dirty)">
          Enter a valid email
        </div>
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">Phone Number</label>
        <span class="color-red">*</span>
        <input type="text" class="form-control" formControlName="phone" id="phone" placeholder="Enter email"
               [ngClass]="{'is-invalid': (userForm.get('phone')?.touched ||
                  userForm.get('phone')?.dirty) &&
                   !userForm.get('phone')?.valid }"
               [ngClass]="{'is-valid': userForm.get('phone')?.valid}">
        <div class="text-danger small ml-2"
             *ngIf="!userForm.get('phone')?.valid && (userForm.get('phone')?.touched ||
                  userForm.get('phone')?.dirty)">
          Enter a valid phone number
        </div>
      </div>
      <div class="mb-3">
        <label for="website" class="form-label">Website URL</label>
        <span class="color-red">*</span>
        <input type="text" class="form-control" formControlName="website" id="website" placeholder="Enter website url"
               [ngClass]="{'is-invalid': (userForm.get('website')?.touched ||
                  userForm.get('website')?.dirty) &&
                   !userForm.get('website')?.valid }"
               [ngClass]="{'is-valid': userForm.get('website')?.valid}">
        <div class="text-danger small ml-2"
             *ngIf="!userForm.get('website')?.valid && (userForm.get('website')?.touched ||
                  userForm.get('website')?.dirty)">
          Enter website
        </div>
      </div>
      <h5>Address</h5>
      <div formGroupName="address" class="px-2">
        <div class="mb-3">
          <label for="street" class="form-label">Street Address</label>
          <input type="text" class="form-control" formControlName="street" id="street" placeholder="Enter street address"
                 [ngClass]="{'is-invalid': (userForm.get('address.street')?.touched ||
                  userForm.get('address.street')?.dirty) &&
                   !userForm.get('address.street')?.valid }">
        </div>
        <div class="mb-3">
          <label for="suite" class="form-label">Suite</label>
          <input type="text" class="form-control" formControlName="suite" id="suite" placeholder="Enter street address"
                 [ngClass]="{'is-invalid': (userForm.get('address.suite')?.touched ||
                  userForm.get('address.suite')?.dirty) &&
                   !userForm.get('address.suite')?.valid }">
        </div>
        <div class="mb-3">
          <label for="city" class="form-label">City</label>
          <input type="text" class="form-control" formControlName="city" id="city" placeholder="Enter city name"
                 [ngClass]="{'is-invalid': (userForm.get('address.city')?.touched ||
                  userForm.get('address.city')?.dirty) &&
                   !userForm.get('address.city')?.valid }">
        </div>
      </div>
      <h5>Company</h5>
      <div formGroupName="company" class="px-2">
        <div class="mb-3">
          <label for="companyName" class="form-label">Company Name</label>
          <input type="text" class="form-control" formControlName="companyName" id="companyName" placeholder="Enter company name"
                 [ngClass]="{'is-invalid': (userForm.get('company.companyName')?.touched ||
                  userForm.get('company.companyName')?.dirty) &&
                   !userForm.get('company.companyName')?.valid }">
        </div>
        <div class="mb-3">
          <label for="catchPhrase" class="form-label">Catch Phrase</label>
          <input type="text" class="form-control" formControlName="catchPhrase" id="catchPhrase" placeholder="Enter catch phrase"
                 [ngClass]="{'is-invalid': (userForm.get('company.catchPhrase')?.touched ||
                  userForm.get('company.catchPhrase')?.dirty) &&
                   !userForm.get('company.catchPhrase')?.valid }">
        </div>
        <div class="mb-3">
          <label for="bs" class="form-label">BS</label>
          <input type="text" class="form-control" formControlName="bs" id="bs" placeholder="Enter bs"
                 [ngClass]="{'is-invalid': (userForm.get('company.bs')?.touched ||
                  userForm.get('company.bs')?.dirty) &&
                   !userForm.get('company.bs')?.valid }">
        </div>
      </div>

<!--      <br>Valid: {{userForm.valid}}-->
<!--      <br>Value: {{userForm.value | json}}-->
      <div class="d-flex justify-content-between">
        <button class="btn btn-outline-secondary btn-lg btn-pd-x" aria-label="Close" (click)="closeModal()">Cancel</button>
        <button class="btn btn-secondary btn-lg btn-pd-x" [ngClass]="(userForm.valid) ? 'btn-success' : 'btn-secondary'"
                [title]="userForm.valid ? 'Save your entered data' : 'Disabled until the form data is valid'"
                [disabled]="!userForm.valid"
                (click)="submitForm(userForm.value)">
          Add
        </button>
      </div>
    </form>
  </div>
</div>
